htmx.defineExtension("preload",{onEvent:function(t,e){var a,n,r;"htmx:afterProcessNode"===t&&(a=function(t,e){if(null!=t)return t.getAttribute(e)||t.getAttribute("data-"+e)||a(t.parentElement,e)},n=function(r){function n(t){r.preloadState="DONE","true"==a(r,"preload-images")&&(document.createElement("div").innerHTML=t)}return function(){var t,e;"READY"===r.preloadState&&((t=r.getAttribute("hx-get")||r.getAttribute("data-hx-get"))?htmx.ajax("GET",t,{handler:function(t,e){n(e.xhr.responseText)}}):r.getAttribute("href")&&((e=new XMLHttpRequest).open("GET",r.getAttribute("href")),e.onload=function(){n(e.responseText)},e.send()))}},r=function(e){if(e.getAttribute("href")+e.getAttribute("hx-get")+e.getAttribute("data-hx-get")!=""&&void 0===e.preloadState){var r=a(e,"preload")||"mousedown";switch(e.addEventListener(r,function(t){"PAUSE"===e.preloadState&&(e.preloadState="READY","mouseover"===r?window.setTimeout(n(e),100):n(e)())}),r){case"mouseover":e.addEventListener("touchstart",n(e)),e.addEventListener("mouseout",function(t){t.target===e&&"READY"===e.preloadState&&(e.preloadState="PAUSE")});break;case"mousedown":e.addEventListener("touchstart",n(e))}e.preloadState="PAUSE",htmx.trigger(e,"preload:init")}},e.target.querySelectorAll("[preload]").forEach(function(t){r(t),t.querySelectorAll("a,[hx-get],[data-hx-get]").forEach(r)}))}});